<% content_for(:title) do %>
  <%= @lesson.course.title.capitalize %> | Lesson: <%= @lesson.title %>
<% end %>
<div class="mx-auto md:w-full w-full grid grid-cols-1 md:grid-cols-4" data-controller="modal-course">
  <section class="md:ml-5 col-span-1 md:col-span-3">
    <%= render @lesson %>
    <div class="flex flex-wrap gap-x-2 gap-y-2">
      <button class="inline-block">
        <%= link_to "Back to Course", course_path(@lesson.course.id), class: "rounded-lg py-2 px-2 bg-gray-100 inline-block font-medium hover:bg-gray-300" %>
      </button>
      <% if policy(@lesson).edit? %>
        <%= link_to "Edit this lesson", edit_course_lesson_path(@course, @lesson), class: " rounded-lg py-2 px-2 bg-gray-100 inline-block font-medium hover:bg-gray-300" %>
        <%= button_tag raw("#{icon("fa-solid fa-trash fa-xs", "font-solid")} Destroy"), type: "button", data: {
        action: 'click->modal-course#open',
        modal_url_value: course_lesson_path(@course, @lesson)
      }, class: "rounded-lg py-2  px-2 bg-red-500 text-white font-medium hover:bg-red-600" %>
      <% end %>
    </div>
  </section>
  <section class="col-span-1 mt-10">
    <% @lessons.each do |lesson| %>
      <% if lesson == @lesson %>
        <%= render "lessons/lesson_preview", lesson: lesson, active: true %>
      <% else %>
        <%= render "lessons/lesson_preview", lesson: lesson, active: false %>
      <% end %>
    <% end %>
  </section>
  <%# modal html %>
  <div data-modal-course-target="modalCourse" id="modalCourse" class="fixed inset-0 flex hidden items-center justify-center">
    <%= render 'shared/course_confirmation_modal' %>
  </div>
</div>
